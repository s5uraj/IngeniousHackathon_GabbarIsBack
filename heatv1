#include <PinChangeInt.h>
#include <eHealth.h>

String readString;

void setup() {
  
  Serial.begin(115200);  
  
}

void loop() {
  
  
  while (Serial.available())
  {
    if (Serial.available() >0)
    {
      readString = "";
      char c = Serial.read();  //gets one byte from serial buffer
      readString += c; //makes the string readString
      Serial.flush();     
    } 
   
  }
  
  if(readString == "1")
  {
  Serial.println("----Body Vitals-----");
  Serial.println(""); 
  get_temp();
  Serial.flush();
  Serial.println("");
  get_ecg();
  Serial.flush();
  Serial.println("");
  get_emg();
  Serial.flush();
  Serial.println("");
  get_gsr();
  Serial.flush();
  Serial.println("----End Vitals-----");
  Serial.println("");
  }
  //get_airflow();
 // Serial.flush();
  delay(5000);	
}
//get body temperature average of 10
void get_temp()
{
  float temperature = eHealth.getTemperature();
  Serial.print("Temperature                  : "); 
  Serial.print(temperature);  
}

void get_ecg()
{
  float ECG = eHealth.getECG();
  Serial.print("ECG                          : "); 
  Serial.print(ECG, 2); 
}
void get_emg()
{
  int EMG = eHealth.getEMG();
  
 Serial.print("EMG                           : "); 
 Serial.print(EMG);  
}
void get_gsr()
{
  
 float conductance = eHealth.getSkinConductance();
 float resistance = eHealth.getSkinResistance();
 float conductanceVol = eHealth.getSkinConductanceVoltage();
 
 Serial.print("Conductance                   : ");       
 Serial.print(conductance, 2);  
 Serial.println("");         

 Serial.print("Resistance                    : ");       
 Serial.print(resistance, 2);  
 Serial.println("");    

 Serial.print("Conductance Voltage           : ");       
 Serial.print(conductanceVol, 4);  
 Serial.println("");

}

void get_ariflow()
{
  int air = eHealth.getAirFlow();   
  eHealth.airFlowWave(air);
  
}




